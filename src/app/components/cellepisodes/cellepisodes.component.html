<div class="card shadow p-0 mb-5 bg-white rounded">
  <p class="card-header text-right" style="font-size: 1vw; padding: auto"><small class="text-muted">{{getFormat()}}</small></p>
  <picture>
    <source media="(min-width: 1400px)" data-srcset="{{itemEpisode?.pictures?.extra_large}}" srcset="../../../assets/img/img-background.svg">
    <source media="(min-width: 700px)" data-srcset="{{itemEpisode?.pictures?.large}}" srcset="../../../assets/img/img-background.svg">
    <source media="(min-width: 450px)" data-srcset="{{itemEpisode?.pictures?.large}}" srcset="../../../assets/img/img-background.svg">
    <source media="(min-width: 300px)" data-srcset="{{itemEpisode?.pictures?.large}}" srcset="../../../assets/img/img-background.svg">
    <img class="lazy card-img-top img-responsive img-fluid" style="padding: auto; max-width:100%; width: 100%; height: auto;" data-src={{itemProgram?.pictures?.i1024wx1024h}} src="../../../assets/img/img-background.svg" alt="...">
  </picture>
  <script async type="application/javascript">
    document.addEventListener("DOMContentLoaded", function() {
      let lazyloadImages = document.querySelectorAll("img.lazy");
      let lazyloadThrottleTimeout;

      function lazyload () {
        if(lazyloadThrottleTimeout) {
          clearTimeout(lazyloadThrottleTimeout);
        }

        lazyloadThrottleTimeout = setTimeout(function() {
          let scrollTop = window.pageYOffset;
          lazyloadImages.forEach(function(img) {
            if(img.offsetTop < (window.innerHeight + scrollTop)) {
              img.src = img.dataset.src;
              img.classList.remove('lazy');
            }
          });
          if(lazyloadImages.length === 0) {
            document.removeEventListener("scroll", lazyload);
            window.removeEventListener("resize", lazyload);
            window.removeEventListener("orientationChange", lazyload);
          }
        }, 20);
      }

      document.addEventListener("scroll", lazyload);
      window.addEventListener("resize", lazyload);
      window.addEventListener("orientationChange", lazyload);
    });
  </script>
  <div class="card-body" style="padding: auto;">
    <h5 class="card-title text-center" style="font-size: 2vw; padding: auto;">{{itemEpisode?.name}}</h5>
    <!--<p class="card-text pv-archiveText" style="font-size: 1vw; padding: auto;">{{itemEpisode.detail}}</p>-->
  </div>
  <div class="card-footer" style="padding: auto">
    <iframe class="lazy" width="100%" height="60" [attr.src]="getUrl()| safe" frameborder="0" webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe>
  </div>
</div>
